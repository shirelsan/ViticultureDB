# Developing a Graphical User Interface for DB Interaction

## ממשק גרפי לניהול מערכת כרם וייצור יין

## Table of Contents  

 •[Introduction](#introduction)
 
  •[about the aplication](#אודות-האפליקציה)
   
  •[tools and technologies](#כלים-וטכנולוגיות)

  •[Installation and commissioning instructions](#הוראות-התקנה-והרצה)
  
  •[Explanation of the app screens](#הסבר-על-המסכים-של-האפליקציה)
    
  •[Files](#קבצים)
### introduction:
## אודות האפליקציה

אפליקציית הניהול שפיתחנו מהווה חלק מפרויקט מסדי נתונים לניהול תהליכי עבודה בכרם ובמפעל ייצור יין.

האפליקציה בנויה בטכנולוגיות Flask בצד השרת בשילוב PostgreSQL כבסיס הנתונים, ומאפשרת למשתמשים לנהל בצורה יעילה את הנתונים המרכזיים של הארגון.

### מטרת הפרויקט
מטרת הפרויקט היא לספק כלי נוח לניהול פעילות יומיומית של הכרם, תוך שמירה על שלמות הנתונים ואפשרות לבצע בקרה בזמן אמת על העובדים,פעילויות התחזוקה והקטיף.

באמצעות הממשק, מנהלי הכרם יכולים לעקוב אחרי פעולות העובדים בזמן אמת, להפיק דוחות על משימות שבוצעו, ולוודא שהמלאי מעודכן בהתאם לקטיפים שנעשו.

בנוסף, המערכת מקלה על ניהול הנתונים לאורך זמן ומאפשרת תחזוקה פשוטה ונוחה של המידע.

### מאפיינים עיקריים
האפליקציה כוללת ממשק משתמש גרפי בדפדפן (מבוסס HTML ו־CSS) ומאפשרת:

• ניהול עובדים (worker) – צפייה בפרטי עובדים, הוספה, עדכון ומחיקה.

• ניהול פעולות קטיף (harvest) – תיעוד קטיפים, צפייה, עדכון ומחיקה של אירועי קטיף.

• ניהול פעולות שבוצעו (perform) – קישור בין עובדים לקטיפים שביצעו.

• שליפת נתונים באמצעות שאילתות מתקדמות – הפעלת שאילתות SQL המציגות מידע משולב ממספר טבלאות.

• הרצת פונקציות ופרוצדורות שנכתבו ב־PL/pgSQL – לטיפול אוטומטי בעדכון תפקידים, כמו גם חישוב כמויות מלאי על בסיס קטיפים שבוצעו.

• ממשק אינטרנטי נגיש ונוח – הממשק פועל בדפדפן האינטרנט ומיועד למשתמשי קצה במפעל היין ובכרם, תוך הקפדה על ידידותיות למשתמש ועיצוב נקי עם אווירה חקלאית.

## שימוש טכנולוגי:

- **שפת תכנות**: Python (ספריית Flask)
- **מסד נתונים**: PostgreSQL (Dockerized)
- **שפות צד לקוח**: HTML, CSS
- **שרת**: SQLAlchemy
- **הרצה מקומית**: Flask (פועל מקומית או בענן)

## הוראות הפעלה וכניסה לממשק:

1. **לוודא שה-PostgreSQL (או Docker אם הבסיס רץ דרכו) פעיל**
   
יש לוודא שהשרת של בסיס הנתונים מופעל והטבלאות הנדרשות קיימות.

2. **להריץ את הקוד**

לפתוח טרמינל/שורת פקודה בתיקיית הפרויקט ולהריץ את הפקודה: python app.py.

לאחר ההרצה תופיע הודעה שהשרת עלה, לדוגמה:
  ```python
* Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
  ```
3. **להיכנס לממשק בדפדפן**
לפתוח דפדפן ולהזין את הכתובת:
```cpp
http://127.0.0.1:5000/
```
הממשק ייטען ותוכלו להתחיל להשתמש במערכת.
 
## **מבנה המסכים באפליקציה:**

### 1. **מסך כניסה (Home Page)**

**תיאור:**
זהו המסך הראשי של האפליקציה, אליו מגיע המשתמש מיד לאחר פתיחת המערכת. הוא כולל תפריט ניווט המובילים לשאר המסכים: CRUD לעובדים, לקטיפים, לקישור בין עובדים לקטיפים, ומסך להרצת שאילתות ופרוצדורות.

 ![screen1](https://github.com/shirelsan/ViticultureDB/blob/main/Phrase5/Screenshots/home_page.jpg?raw=true)  


**תיאור:**
זהו המסך הראשי של האפליקציה, אליו מגיע המשתמש מיד לאחר פתיחת המערכת. הוא כולל תפריט ניווט המובילים לשאר המסכים: CRUD לעובדים, לקטיפים, לקישור בין עובדים לקטיפים, ומסך להרצת שאילתות ופרוצדורות.

### 2. **מסך ניהול עובדים **

**תיאור:**
במסך זה ניתן לצפות ברשימת העובדים הקיימים, להוסיף עובד חדש, לערוך פרטי עובד, לעדכן תפקידים ושנות ותק, וכן למחוק עובדים ממסד הנתונים.

 ![screen1](https://github.com/shirelsan/ViticultureDB/blob/main/Phrase5/Screenshots/worker_management.jpg?raw=true)  


### 3. **מסך ניהול קצירים**

**תיאור:**
במסך זה ניתן לצפות בנתוני הקטיפים, להוסיף קטיף חדש, לערוך נתוני קטיף קיים (כמו תאריך וכמות), ולעדכן או למחוק קטיפים על פי הצורך.

 ![screen1](https://github.com/shirelsan/ViticultureDB/blob/main/Phrase5/Screenshots/harvests_list.jpg?raw=true)  


### 4. **מסך שיוך עובדים **

**תיאור:** 
במסך זה ניתן לשייך עובדים לקטיפים שבוצעו, לצפות בקשרים הקיימים בין עובדים לקטיפים, ולהוסיף או להסיר שיוכים בין עובדים לקטיפים.

 ![screen1](https://github.com/shirelsan/ViticultureDB/blob/main/Phrase5/Screenshots/worker_to_harvest.jpg?raw=true)  


## **5. מסך הפעלת שאילתות, פונקציות ופרוצדורות**

**תיאור:**
במסך זה ניתן להריץ שאילתות SQL מתקדמות לקבלת דוחות ומידע מהמערכת, להפעיל פונקציות מובנות לביצוע עדכונים מבוקרים בנתונים, ולהריץ פרוצדורה שמבצעת עדכונים במסד הנתונים, כגון עדכון כמויות מלאי או שינוי תפקידי עובדים בהתאם לנתוני קטיפים ותחזוקה.

 ![screen1](https://github.com/shirelsan/ViticultureDB/blob/main/Phrase5/Screenshots/queries.jpg?raw=true)  


🟢 שאילתה לדוגמה 1 – סיכום קטיפים:

SELECT harvest_date, SUM(amount_kg) AS total_harvested
FROM harvest
GROUP BY harvest_date
ORDER BY harvest_date;
**מטרה:** הצגת כמויות ענבים שנקטפו לפי תאריכים – כלי חשוב לתכנון ותיעוד תהליך הייצור.

🟢 שאילתה לדוגמה 2 – עובדים פעילים ביותר:

SELECT w.name, COUNT(*) AS num_of_participations
FROM perform p
JOIN worker w ON p.worker_id = w.worker_id
GROUP BY w.name
ORDER BY num_of_participations DESC;
**מטרה:** להבין מי מהעובדים לקח חלק בקטיפים הרבים ביותר.

🔵 פרוצדורה לדוגמה 1 – עדכון מלאי חומרים:

CALL update_material_stock(harvest_id := 5, usage_kg := 200);
תיאור: פרוצדורה שמעדכנת את המלאי בהתאם לקטיף שבוצע וכמות החומר שנצרכה.

🔵 פונקציה לדוגמה 2 – כמות קטיפים לעובד:

SELECT count_harvests_by_worker(3);
תיאור: מקבלת מזהה של עובד ומחזירה את מספר הקטיפים בהם השתתף.


## **קבצים**

**קוד מקור:**  בתיקייה app/

**הוראות הרצה:** בקובץ זה ובקובץ (לשנות ---instructions.txt

**תמונות מסך:** בתיקייה screenshots/


